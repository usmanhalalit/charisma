(function(){(function(e,g){var h,f;f=g.document;h=function(){function d(a){var c=this;this._options=e.extend({afterSetState:function(a,c){},afterGetState:function(a,c){}},a);this._steps=[];this.setCurrentStep();e(f).on("click",".popover .next",function(a){a.preventDefault();return c.next()});e(f).on("click",".popover .end",function(a){a.preventDefault();return c.end()})}d.prototype.setState=function(a,c){e.cookie("tour_"+a,c,{expires:36500,path:"/"});return this._options.afterSetState(a,c)};d.prototype.getState=
function(a){var c;c=e.cookie("tour_"+a);this._options.afterGetState(a,c);return c};d.prototype.addStep=function(a){return this._steps.push(a)};d.prototype.getStep=function(a){return e.extend({path:"",placement:"right",title:"",content:"",next:a+1,end:a===this._steps.length-1,animation:!0},this._steps[a])};d.prototype.start=function(a){null==a&&(a=!1);if(a||!this.ended())return this.showStep(this._current)};d.prototype.next=function(){this.hideStep(this._current);return this.showNextStep()};d.prototype.end=
function(){this.hideStep(this._current);return this.setState("end","yes")};d.prototype.ended=function(){return!!this.getState("end")};d.prototype.restart=function(){this.setState("current_step",null);this.setState("end",null);this.setCurrentStep(0);return this.start()};d.prototype.hideStep=function(a){a=this.getStep(a);if(null!=a.onHide)a.onHide(this);return e(a.element).popover("hide")};d.prototype.showStep=function(a){var c,b,d=this;b=this.getStep(a);if(null==b.element)this.end;else if(this.setCurrentStep(a),
""!==b.path&&f.location.pathname!==b.path&&f.location.pathname.replace(/^.*[\\\/]/,"")!==b.path)f.location.href=b.path;else if(e(b.element).is(":hidden"))this.showNextStep();else{c=b.endOnClick||b.element;e(c).one("click",function(){return d.endCurrentStep()});if(null!=b.onShow)b.onShow(this);return this._showPopover(b,a)}};d.prototype.setCurrentStep=function(a){if(null!=a)return this._current=a,this.setState("current_step",a);this._current=this.getState("current_step");return null===this._current||
"null"===this._current?this._current=0:this._current=parseInt(this._current)};d.prototype.endCurrentStep=function(){var a;this.hideStep(this._current);a=this.getStep(this._current);return this.setCurrentStep(a.next)};d.prototype.showNextStep=function(){var a;a=this.getStep(this._current);return this.showStep(a.next)};d.prototype._showPopover=function(a,c){var b;b=""+a.content+"<br /><p>";b=a.end?b+"<a href='#' class='end'>End</a>":b+("<a href='#"+a.next+"' class='next'>Next &raquo;</a>          <a href='#' class='pull-right end'>End tour</a></p>");
e(a.element).popover({placement:a.placement,trigger:"manual",title:a.title,content:b,animation:a.animation}).popover("show");b=e(a.element).data("popover").tip();this._reposition(b);return this._scrollIntoView(b)};d.prototype._reposition=function(a){var c,b;b=a.offset();c=e(f).outerHeight()-b.top-e(a).outerHeight();0>c&&(b.top+=c);c=e(f).outerWidth()-b.left-e(a).outerWidth();0>c&&(b.left+=c);0>b.top&&(b.top=0);0>b.left&&(b.left=0);return a.offset(b)};d.prototype._scrollIntoView=function(a){var c;
c=a.get(0).getBoundingClientRect();if(!(0<c.top&&c.bottom<e(g).height()&&0<c.left&&c.right<e(g).width()))return a.get(0).scrollIntoView(!0)};return d}();return g.Tour=h})(jQuery,window)}).call(this);
