(function(t){t.plot.plugins.push({init:function(t){t.hooks.processDatapoints.push(function(b,m,u){if(!(null==m.stack||!1===m.stack)){var k;b=b.getData();for(var f=null,h=0;h<b.length&&m!=b[h];++h)b[h].stack==m.stack&&(f=b[h]);if(k=f){b=u.pointsize;f=u.points;h=k.datapoints.pointsize;k=k.datapoints.points;var c=[],q,a,r,l,p,s,v=m.lines.show;l=m.bars.horizontal;var t=2<b&&(l?u.format[2].x:u.format[2].y);m=v&&m.lines.steps;r=!0;for(var w=l?1:0,n=l?0:1,d=0,g=0,e;!(d>=f.length);){e=c.length;if(null==f[d]){for(a=
0;a<b;++a)c.push(f[d+a]);d+=b}else if(g>=k.length){if(!v)for(a=0;a<b;++a)c.push(f[d+a]);d+=b}else if(null==k[g]){for(a=0;a<b;++a)c.push(null);r=!0;g+=h}else{q=f[d+w];a=f[d+n];l=k[g+w];p=k[g+n];s=0;if(q==l){for(a=0;a<b;++a)c.push(f[d+a]);c[e+n]+=p;s=p;d+=b;g+=h}else if(q>l){if(v&&0<d&&null!=f[d-b]){r=a+(f[d-b+n]-a)*(l-q)/(f[d-b+w]-q);c.push(l);c.push(r+p);for(a=2;a<b;++a)c.push(f[d+a]);s=p}g+=h}else{if(r&&v){d+=b;continue}for(a=0;a<b;++a)c.push(f[d+a]);v&&(0<g&&null!=k[g-h])&&(s=p+(k[g-h+n]-p)*(q-
l)/(k[g-h+w]-l));c[e+n]+=s;d+=b}r=!1;e!=c.length&&t&&(c[e+2]+=s)}if(m&&e!=c.length&&0<e&&null!=c[e]&&c[e]!=c[e-b]&&c[e+1]!=c[e-b+1]){for(a=0;a<b;++a)c[e+b+a]=c[e+a];c[e+1]=c[e-b+1]}}u.points=c}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})})(jQuery);
